!function(e){var t={};function n(r){if(t[r])return t[r].exports;var c=t[r]={i:r,l:!1,exports:{}};return e[r].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(r,c,function(t){return e[t]}.bind(null,c));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";n.d(t,"a",function(){return r});class r{constructor(){this.serviceUrl="http://localhost:5000"}async listAllProducts(){try{const e=await fetch(`${this.serviceUrl}/products`);if(200!==e.status&&201!==e.status)throw new Error(e.statusText);return await e.json()}catch(e){throw e}}async listProductsByCategory(e){try{const t=await fetch(`${this.serviceUrl}?category=${e}`);if(200!==t.status&&201!==t.status)throw new Error(t.statusText);return await t.json()}catch(e){throw e}}async addToCart(e){try{let t="";return $.ajax({url:`${this.serviceUrl}/addToCart`,type:"POST",data:{id:e},success:function(e,n,r){t=r.responseText,console.log(t)},error:function(e,t,n){throw new Error("Error occurred!")}}),console.log(t),await t.json()}catch(e){throw e}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});class r{constructor(){this.serviceUrl="http://localhost:5000"}async findAll(){try{const e=await fetch(this.serviceUrl+"/categories");if(200!==e.status&&201!==e.status)throw new Error(e.statusText);return await e.json()}catch(e){throw new Error("Fetch failed")}}async getBanner(){try{const e=await fetch(this.serviceUrl+"/banners");if(200!==e.status&&201!==e.status)throw new Error(e.statusText);return await e.json()}catch(e){throw e}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});const r=new(n(0).a);class c{constructor(){}render(){let e=JSON.parse(sessionStorage.getItem("cart"))||[];const t=document.getElementById("overlayContainer");if(!document.querySelector(".overlay-header")){const e=document.createElement("div");e.className="overlay-header",e.innerHTML='<header><div class="cart-header"><div class="cart-name">My Cart</div><i class="fas fa-times close"></i></div></header>',t.appendChild(e);const n=document.createElement("div");n.className="overlay-content empty",n.innerHTML='<div class="cart-empty"><p>No items in your cart</p><p>Your favourite items are just a click away</p></div><div class="content"></div>';const r=document.createElement("div");r.className="overlay-footer",r.innerHTML='<div class="overlay-button"><button class="checkout start" type="button">Start Shopping</button></div>',t.appendChild(n),t.appendChild(r)}if(e.length){let t=0;e.forEach(e=>{t+=JSON.parse(e).qty}),document.querySelector(".header-menu__subgroup-container.item-total").innerText=t+" items";const n=document.querySelector(".overlay-content");n.innerHTML="",n.classList.remove("empty");const c=document.createElement("div");c.className="content";let a=0;r.listAllProducts().then(t=>{t.forEach(t=>{e.forEach(e=>{const n=JSON.parse(e);if(n.product_id==t.id&&n.qty){const e=document.createElement("div");e.className="cart-instance";const r=document.createElement("div");r.className="cart-instance__image",r.innerHTML='<img alt="'+t.name+'" src="'+t.imageURL.replace("/static/","")+'" height="100" width="100">',e.appendChild(r);const o=document.createElement("div");o.className="cart-instance__desc",o.innerHTML="<p>"+t.name+'</p><div class="cart-instance__qty"><button type="button" class="cart-instance__update decrease" data-id="'+t.id+'">-</button><span class="cart-qty">'+n.qty+'</span><button type="button" class="cart-instance__update increase" data-id="'+t.id+'">+</button><span class="times">X</span><span class="cart-price">Rs.'+t.price+"</div>",e.appendChild(o);const s=document.createElement("div");s.className="cart-instance__total",s.innerHTML="<span>Rs."+n.qty*t.price+"</span>",e.appendChild(s),c.appendChild(e),a+=n.qty*t.price}})});const r=document.createElement("div");r.className="cart__lowest-price",r.innerHTML='<img src="images/lowest-price.png"><span>You won\'t find it cheaper anywhere</span>',c.appendChild(r),n.appendChild(c),document.querySelector(".promo-message")&&document.querySelector(".promo-message").remove(),document.querySelector(".checkout.proceed")&&document.querySelector(".checkout.proceed").remove();const o=document.querySelector(".overlay-button"),s=document.createElement("div");s.className="promo-message",s.innerText="Promo code can be applied on payment page",o.appendChild(s),document.querySelector(".checkout.start").style.display="none";const i=document.createElement("button");i.className="checkout proceed",i.innerHTML='<div class="proceed">Proceed to Checout</div><div class="cart_total">Rs.'+a+'</div><div class="arrow">></div>',o.appendChild(i);$(".increase").each((t,n)=>{n.addEventListener("click",n=>{let r=0;e.forEach(n=>{const c=JSON.parse(n);c.product_id==event.target.dataset.id&&(r=c.qty,r++,c.qty=r,e[t]=JSON.stringify(c))}),sessionStorage.setItem("cart",JSON.stringify(e)),this.render()})}),$(".decrease").each((t,n)=>{n.addEventListener("click",n=>{let r=1,c=0;e.forEach(n=>{const a=JSON.parse(n);a.product_id==event.target.dataset.id&&(r=a.qty,r--,a.qty=r,e[t]=JSON.stringify(a)),c+=a.qty}),sessionStorage.setItem("cart",JSON.stringify(e)),c||(sessionStorage.removeItem("cart"),document.querySelector(".content").innerHTML="",document.querySelector(".overlay-content").innerHTML='<div class="cart-empty"><p>No items in your cart</p><p>Your favourite items are just a click away</p></div><div class="content"></div>',document.querySelector(".content").style.display="none",document.querySelector(".promo-message").style.display="none",document.querySelector(".checkout.proceed").style.display="none",document.querySelector(".checkout.start").style.display="block",document.querySelector(".overlay-content").classList.add("empty"),document.querySelector(".header-menu__subgroup-container.item-total").innerText="0 items"),this.render()})}),document.querySelector(".proceed")&&document.querySelector(".proceed").addEventListener("click",e=>{document.getElementById("overlay").style.display="none",document.body.style.overflow="auto"})}).catch(e=>console.log("Something went wrong!!")),document.querySelector(".cart__lowest-price")&&document.querySelector(".cart__lowest-price").remove()}document.querySelector(".close").addEventListener("click",e=>{document.getElementById("overlay").style.display="none",document.body.style.overflow="auto"}),document.querySelector(".checkout.start").addEventListener("click",e=>{document.getElementById("overlay").style.display="none",document.body.style.overflow="auto"})}}},,function(e,t,n){"use strict";n.r(t);var r=n(1);const c=new r.a;var a=n(2);const o=new class{constructor(e){this.catService=e}render(){this.getBannerItems(),this.findAllCategories()}findAllCategories(){let e=11;c.findAll().then(t=>{const n=document.querySelector(".categories");let r=0;t.forEach(t=>{if(t.enabled){const c=document.createElement("li");c.tabIndex=e++;let a="";a=r%2==0?"row":"row-reverse",c.className="category-item "+a,c.innerHTML='<img src="'+t.imageUrl.replace("/static/","")+'" alt="'+t.name+'" width="250" height="175" class="category-image" tabindex="'+e+++'"><ul class="category-detail"><li tabindex="'+e+++'"><h3>'+t.name+'</h3></li><li tabindex="'+e+++'">'+t.description+'</li><li><button type="button" id="category-'+r+'" class="category-list__button" data-attr="'+t.id+'" tabindex="'+e+++'">'+t.name+"</button></li></ul>",n.appendChild(c),r++}});const c=document.getElementsByClassName("category-list__button");Array.prototype.forEach.call(c,e=>{e.addEventListener("click",function(){window.location="/products?id="+e.dataset.attr})}),document.querySelector(".page-footer span").tabIndex=e}).catch(e=>{console.log(e),window.href="/error"})}getBannerItems(){c.getBanner().then(e=>{const t=document.querySelector(".carousel"),n=document.createElement("div");n.className="dot-container";const r=document.querySelector(".slideshow-container");e.forEach(e=>{if(e.isActive){const t=document.createElement("div");t.setAttribute("role","image slide"),t.className="mySlides fade";const c=document.createElement("img");c.src=e.bannerImageUrl.replace("/static/",""),c.alt=e.bannerImageAlt,t.appendChild(c),r.appendChild(t);const a=document.createElement("span");a.className="dot",n.appendChild(a)}}),t.appendChild(n)}).catch(e=>{console.log(e),window.location="/error"})}}(new r.a),s=new a.a;o.render();var i=0;function l(){var e,t=document.getElementsByClassName("mySlides"),n=document.getElementsByClassName("dot");for(e=0;e<t.length;e++)t[e].style.display="none";for(e=0;e<n.length;e++)n[e].className=n[e].className.replace(" active","");++i>t.length&&(i=1),t[i-1].style.display="block",n[i-1].className+=" active",setTimeout(l,1e3)}function d(e){u(i+=e)}function u(e){var t,n=document.getElementsByClassName("mySlides"),r=document.getElementsByClassName("dot");for(e>n.length&&(i=1),e<1&&(i=n.length),t=0;t<n.length;t++)n[t].style.display="none";for(t=0;t<r.length;t++)r[t].className=r[t].className.replace(" active","");n[i-1].style.display="block",r[i-1].className+=" active"}setTimeout(()=>{l()},500),document.querySelector(".prev").addEventListener("click",()=>{d(-1)}),document.querySelector(".next").addEventListener("click",()=>{d(1)}),document.querySelector(".header-menu__subgroup-container.cart").addEventListener("click",e=>{document.getElementById("overlay").style.display="block",document.body.style.overflow="hidden",s.render()});let m=JSON.parse(sessionStorage.getItem("cart"))||[],y=0;m.forEach(e=>{y+=JSON.parse(e).qty}),document.querySelector(".header-menu__subgroup-container.item-total").innerText=y+" items"}]);